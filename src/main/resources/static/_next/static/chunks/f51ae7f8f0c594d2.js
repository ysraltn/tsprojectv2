(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87486,e=>{"use strict";e.s(["Badge",()=>l]);var t=e.i(43476),r=e.i(91918),a=e.i(25913),s=e.i(75157);let n=(0,a.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:a,variant:l,asChild:i=!1,...d}=e,c=i?r.Slot:"span";return(0,t.jsx)(c,{"data-slot":"badge",className:(0,s.cn)(n({variant:l}),a),...d})}},75254,e=>{"use strict";e.s(["default",()=>l],75254);var t=e.i(71645);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,t.forwardRef)((e,r)=>{let{color:n="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:c="",children:o,iconNode:u,...m}=e;return(0,t.createElement)("svg",{ref:r,...s,width:l,height:l,stroke:n,strokeWidth:d?24*Number(i)/Number(l):i,className:a("lucide",c),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[r,a]=e;return(0,t.createElement)(r,a)}),...Array.isArray(o)?o:[o]])}),l=(e,s)=>{let l=(0,t.forwardRef)((l,i)=>{let{className:d,...c}=l;return(0,t.createElement)(n,{ref:i,iconNode:s,className:a("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...c})});return l.displayName=r(e),l}},15288,e=>{"use strict";e.s(["Card",()=>a,"CardContent",()=>i,"CardDescription",()=>l,"CardHeader",()=>s,"CardTitle",()=>n]);var t=e.i(43476),r=e.i(75157);function a(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...s})}function s(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...s})}function n(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",a),...s})}function l(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",a),...s})}function i(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",a),...s})}},48425,e=>{"use strict";e.s(["Primitive",()=>n,"dispatchDiscreteCustomEvent",()=>l]);var t=e.i(71645),r=e.i(74080),a=e.i(91918),s=e.i(43476),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let n=(0,a.createSlot)("Primitive.".concat(r)),l=t.forwardRef((e,t)=>{let{asChild:a,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(a?n:r,{...l,ref:t})});return l.displayName="Primitive.".concat(r),{...e,[r]:l}},{});function l(e,t){e&&r.flushSync(()=>e.dispatchEvent(t))}},93479,e=>{"use strict";e.s(["Input",()=>a]);var t=e.i(43476),r=e.i(75157);function a(e){let{className:a,type:s,...n}=e;return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...n})}},37727,e=>{"use strict";e.s(["X",()=>t],37727);let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},88844,e=>{"use strict";e.s(["Package",()=>t],88844);let t=(0,e.i(75254).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},55436,e=>{"use strict";e.s(["Search",()=>t],55436);let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},90496,e=>{"use strict";e.s(["default",()=>f],90496);var t=e.i(43476),r=e.i(71645),a=e.i(9165),s=e.i(15288),n=e.i(67489),l=e.i(19455),i=e.i(87486),d=e.i(93479),c=e.i(46696),o=e.i(75254);let u=(0,o.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),m=(0,o.default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var x=e.i(88844),h=e.i(55436),v=e.i(37727);function f(){var e,o,f,g,p;let[y,j]=(0,r.useState)([]),[b,N]=(0,r.useState)([]),[w,k]=(0,r.useState)(null),[C,S]=(0,r.useState)(null),[A,K]=(0,r.useState)([]),[L,P]=(0,r.useState)([]),[B,I]=(0,r.useState)(!1),[M,T]=(0,r.useState)(!1),[V,z]=(0,r.useState)(""),[E,H]=(0,r.useState)(""),U=(0,r.useMemo)(()=>{if(!V)return y;let e=V.toLowerCase();return y.filter(t=>{let r=t.name&&t.surname?"".concat(t.name," ").concat(t.surname):"",a=t.username||"",s=t.email||"";return r.toLowerCase().includes(e)||a.toLowerCase().includes(e)||s.toLowerCase().includes(e)})},[y,V]),F=(0,r.useMemo)(()=>{if(!E)return b;let e=E.toLowerCase();return b.filter(t=>{let r=t.brand||"",a=t.model||"",s=t.serial||"",n=t.type||"",l=t.institutionName||"";return r.toLowerCase().includes(e)||a.toLowerCase().includes(e)||s.toLowerCase().includes(e)||n.toLowerCase().includes(e)||l.toLowerCase().includes(e)})},[b,E]);(0,r.useEffect)(()=>{(async()=>{try{I(!0);let[e,t]=await Promise.all([a.userApi.getUsers(),a.productApi.getProducts()]);j(e),N(t)}catch(e){console.error("Failed to load initial data:",e),c.toast.error("Veri yükleme başarısız")}finally{I(!1)}})()},[]),(0,r.useEffect)(()=>{w?R(w):K([])},[w]),(0,r.useEffect)(()=>{C?O(C):P([])},[C]);let R=async e=>{try{let t=await a.userAssignmentsApi.getAssignmentsByUser(e);K(t)}catch(e){console.error("Failed to load user products:",e),c.toast.error("Kullanıcı ürünleri yüklenemedi")}},O=async e=>{try{let t=await a.userAssignmentsApi.getAssignmentsByProduct(e);P(t)}catch(e){console.error("Failed to load product users:",e),c.toast.error("Ürün kullanıcıları yüklenemedi")}},W=async()=>{if(!w||!C)return void c.toast.error("Kullanıcı ve ürün seçin");try{T(!0),await a.userAssignmentsApi.assignProduct(w,C),c.toast.success("Ürün kullanıcıya başarıyla atandı"),await Promise.all([R(w),O(C)])}catch(r){var e,t;console.error("Failed to assign product:",r),c.toast.error((null==r||null==(t=r.response)||null==(e=t.data)?void 0:e.message)||"Ürün atama başarısız")}finally{T(!1)}},X=async(e,t,r)=>{try{await a.userAssignmentsApi.unassignProduct(t,r),c.toast.success("Ürün ataması kaldırıldı"),w===t&&await R(t),C===r&&await O(r)}catch(e){var s,n;console.error("Failed to unassign product:",e),c.toast.error((null==e||null==(n=e.response)||null==(s=n.data)?void 0:s.message)||"Atama kaldırma başarısız")}},_=()=>y.find(e=>e.id===w),q=()=>b.find(e=>e.id===C);return B?(0,t.jsx)("div",{className:"max-w-7xl mx-auto py-8",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Yüklüyor..."})}):(0,t.jsxs)("div",{className:"max-w-7xl mx-auto py-8 space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Ürün Atama"})}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Package,{className:"h-5 w-5"}),"Seçim ve Atama"]})}),(0,t.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Kullanıcı Seç"}),V&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[U.length," sonuç bulundu"]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(d.Input,{placeholder:"Kullanıcı ara (ad, kullanıcı adı, e-posta)...",value:V,onChange:e=>z(e.target.value),className:"pl-10 pr-10"}),V&&(0,t.jsx)("button",{onClick:()=>z(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:(0,t.jsx)(v.X,{className:"h-4 w-4"})})]}),(0,t.jsxs)(n.Select,{value:w?String(w):void 0,onValueChange:e=>{k(Number(e)),z("")},children:[(0,t.jsx)(n.SelectTrigger,{children:(0,t.jsx)(n.SelectValue,{placeholder:"Kullanıcı seçin"})}),(0,t.jsx)(n.SelectContent,{className:"max-h-60",children:0===U.length?(0,t.jsx)("div",{className:"p-2 text-sm text-muted-foreground text-center",children:V?"Arama kriterlerine uygun kullanıcı bulunamadı":"Kullanıcı bulunamadı"}):U.map(e=>(0,t.jsx)(n.SelectItem,{value:String(e.id),children:e.name&&e.surname?"".concat(e.name," ").concat(e.surname," (").concat(e.username,")"):e.username||e.email||"Kullanıcı ".concat(e.id)},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Ürün Seç"}),E&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[F.length," sonuç bulundu"]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(d.Input,{placeholder:"Ürün ara (marka, model, seri, kurum)...",value:E,onChange:e=>H(e.target.value),className:"pl-10 pr-10"}),E&&(0,t.jsx)("button",{onClick:()=>H(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:(0,t.jsx)(v.X,{className:"h-4 w-4"})})]}),(0,t.jsxs)(n.Select,{value:C?String(C):void 0,onValueChange:e=>{S(Number(e)),H("")},children:[(0,t.jsx)(n.SelectTrigger,{children:(0,t.jsx)(n.SelectValue,{placeholder:"Ürün seçin"})}),(0,t.jsx)(n.SelectContent,{className:"max-h-60",children:0===F.length?(0,t.jsx)("div",{className:"p-2 text-sm text-muted-foreground text-center",children:E?"Arama kriterlerine uygun ürün bulunamadı":"Ürün bulunamadı"}):F.map(e=>(0,t.jsxs)(n.SelectItem,{value:String(e.id),children:[e.brand," ",e.model," - ",e.serial,e.institutionName&&" (".concat(e.institutionName,")")]},e.id))})]})]})]}),(0,t.jsx)("div",{className:"flex justify-center pt-4",children:(0,t.jsxs)(l.Button,{onClick:W,disabled:!w||!C||M,size:"lg",className:"min-w-[200px]",children:[(0,t.jsx)(m,{className:"h-4 w-4 mr-2"}),M?"Atanıyor...":"Ürünü Kullanıcıya Ata"]})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{children:w?"".concat((null==(e=_())?void 0:e.name)||(null==(o=_())?void 0:o.username)||"Kullanıcı","'nın Ürünleri"):"Kullanıcının Ürünleri"})}),(0,t.jsx)(s.CardContent,{children:w?0===A.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"Bu kullanıcıya atanmış ürün yok"}):(0,t.jsx)("div",{className:"space-y-3",children:A.map(e=>{let r=b.find(t=>t.id===e.productId);return(0,t.jsx)("div",{className:"border rounded-lg p-4 bg-muted/50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"font-medium",children:[null==r?void 0:r.brand," ",null==r?void 0:r.model]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Seri: ",e.productSerial]}),(null==r?void 0:r.institutionName)&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Kurum: ",r.institutionName]}),(null==r?void 0:r.status)&&(0,t.jsx)(i.Badge,{variant:"aktif"===r.status?"default":"secondary",className:"mt-1",children:r.status})]}),(0,t.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>X(e.id,e.userId,e.productId),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(u,{className:"h-4 w-4"})})]})},e.id)})}):(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"Ürünleri görmek için bir kullanıcı seçin"})})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{children:C?"".concat(null==(f=q())?void 0:f.brand," ").concat(null==(g=q())?void 0:g.model," (").concat(null==(p=q())?void 0:p.serial,") Kullanıcıları"):"Ürün Kullanıcıları"})}),(0,t.jsx)(s.CardContent,{children:C?0===L.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"Bu ürüne atanmış kullanıcı yok"}):(0,t.jsx)("div",{className:"space-y-3",children:L.map(e=>{let r=y.find(t=>t.id===e.userId);return(0,t.jsx)("div",{className:"border rounded-lg p-4 bg-muted/50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:(null==r?void 0:r.name)&&(null==r?void 0:r.surname)?"".concat(r.name," ").concat(r.surname):e.username}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Kullanıcı Adı: ",e.username]}),(null==r?void 0:r.email)&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["E-posta: ",r.email]})]}),(0,t.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>X(e.id,e.userId,e.productId),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(u,{className:"h-4 w-4"})})]})},e.id)})}):(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"Kullanıcıları görmek için bir ürün seçin"})})]})]})]})}}]);