(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87486,e=>{"use strict";e.s(["Badge",()=>i]);var t=e.i(43476),a=e.i(91918),r=e.i(25913),s=e.i(75157);let l=(0,r.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:r,variant:i,asChild:n=!1,...d}=e,c=n?a.Slot:"span";return(0,t.jsx)(c,{"data-slot":"badge",className:(0,s.cn)(l({variant:i}),r),...d})}},75254,e=>{"use strict";e.s(["default",()=>i],75254);var t=e.i(71645);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)((e,a)=>{let{color:l="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:d,className:c="",children:o,iconNode:u,...m}=e;return(0,t.createElement)("svg",{ref:a,...s,width:i,height:i,stroke:l,strokeWidth:d?24*Number(n)/Number(i):n,className:r("lucide",c),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[a,r]=e;return(0,t.createElement)(a,r)}),...Array.isArray(o)?o:[o]])}),i=(e,s)=>{let i=(0,t.forwardRef)((i,n)=>{let{className:d,...c}=i;return(0,t.createElement)(l,{ref:n,iconNode:s,className:r("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...c})});return i.displayName=a(e),i}},15288,e=>{"use strict";e.s(["Card",()=>r,"CardContent",()=>n,"CardDescription",()=>i,"CardHeader",()=>s,"CardTitle",()=>l]);var t=e.i(43476),a=e.i(75157);function r(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...s})}function s(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...s})}function l(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",r),...s})}function i(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",r),...s})}function n(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",r),...s})}},48425,e=>{"use strict";e.s(["Primitive",()=>l,"dispatchDiscreteCustomEvent",()=>i]);var t=e.i(71645),a=e.i(74080),r=e.i(91918),s=e.i(43476),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let l=(0,r.createSlot)("Primitive.".concat(a)),i=t.forwardRef((e,t)=>{let{asChild:r,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(r?l:a,{...i,ref:t})});return i.displayName="Primitive.".concat(a),{...e,[a]:i}},{});function i(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}},93479,e=>{"use strict";e.s(["Input",()=>r]);var t=e.i(43476),a=e.i(75157);function r(e){let{className:r,type:s,...l}=e;return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...l})}},55436,e=>{"use strict";e.s(["Search",()=>t],55436);let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},88511,e=>{"use strict";e.s(["Edit",()=>t],88511);let t=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},63488,e=>{"use strict";e.s(["Mail",()=>t],63488);let t=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},88844,e=>{"use strict";e.s(["Package",()=>t],88844);let t=(0,e.i(75254).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},61911,e=>{"use strict";e.s(["Users",()=>t],61911);let t=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},82293,e=>{"use strict";e.s(["UserCheck",()=>t],82293);let t=(0,e.i(75254).default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},49196,e=>{"use strict";e.s(["default",()=>j],49196);var t=e.i(43476),a=e.i(71645),r=e.i(57951),s=e.i(9165),l=e.i(15288),i=e.i(93479),n=e.i(19455),d=e.i(67489),c=e.i(87486),o=e.i(46696),u=e.i(55436),m=e.i(61911),x=e.i(88844),h=e.i(88511),f=e.i(63488),v=e.i(82293);let g=(0,e.i(75254).default)("shield-x",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);var p=e.i(18566);function j(){let{isAdmin:e,user:j}=(0,r.useAuth)(),y=(0,p.useRouter)(),[b,N]=(0,a.useState)(!0),[k,w]=(0,a.useState)([]),[C,S]=(0,a.useState)(""),[A,z]=(0,a.useState)("all"),[E,M]=(0,a.useState)("name"),[P,I]=(0,a.useState)("asc");(0,a.useEffect)(()=>{if(j&&!e()){o.toast.error("Bu sayfaya erişim yetkiniz yok."),y.push("/dashboard");return}},[e,y,j]);let T=async()=>{try{N(!0);let e=await s.userApi.getUsers(),t=Array.isArray(e)?e:[],a=[];for(let e of t)try{let t=await s.userAssignmentsApi.getAssignmentsByUser(e.id);a.push({...e,assignedProducts:Array.isArray(t)?t:[],productCount:Array.isArray(t)?t.length:0})}catch(t){console.error("Failed to load assignments for user ".concat(e.id,":"),t),a.push({...e,assignedProducts:[],productCount:0})}w(a)}catch(e){console.error("Failed to load users:",e),o.toast.error("Kullanıcılar yüklenirken hata oluştu")}finally{N(!1)}};(0,a.useEffect)(()=>{T()},[]);let R=(0,a.useMemo)(()=>{let e=new Set;return k.forEach(t=>{t.role&&e.add(t.role)}),Array.from(e).sort()},[k]),B=(0,a.useMemo)(()=>{let e=k.filter(e=>{var t,a,r;let s=C.toLowerCase(),l=e.name&&e.surname?"".concat(e.name," ").concat(e.surname):"",i=!C||l.toLowerCase().includes(s)||(null==(t=e.username)?void 0:t.toLowerCase().includes(s))||(null==(a=e.email)?void 0:a.toLowerCase().includes(s))||(null==(r=e.role)?void 0:r.toLowerCase().includes(s)),n="all"===A||e.role===A;return i&&n});return e.sort((e,t)=>{let a="",r="";switch(E){case"name":default:a=e.name&&e.surname?"".concat(e.name," ").concat(e.surname):e.username||"",r=t.name&&t.surname?"".concat(t.name," ").concat(t.surname):t.username||"";break;case"username":a=e.username||"",r=t.username||"";break;case"email":a=e.email||"",r=t.email||"";break;case"role":a=e.role||"",r=t.role||"";break;case"productCount":a=e.productCount,r=t.productCount}if("string"==typeof a&&"string"==typeof r){let e=a.localeCompare(r);return"asc"===P?e:-e}{let e=a-r;return"asc"===P?e:-e}}),e},[k,C,A,E,P]);return j?e()?(0,t.jsxs)("div",{className:"max-w-7xl mx-auto py-8 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Kullanıcılar"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[B.length," kullanıcı"]})})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsx)(l.CardTitle,{className:"text-lg",children:"Filtreler ve Arama"})}),(0,t.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.Input,{placeholder:"Kullanıcı ara (ad, kullanıcı adı, e-posta, rol)...",value:C,onChange:e=>S(e.target.value),className:"pl-10"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Rol"}),(0,t.jsxs)(d.Select,{value:A,onValueChange:z,children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{placeholder:"Rol seçin"})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"all",children:"Tümü"}),R.map(e=>(0,t.jsx)(d.SelectItem,{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Sırala"}),(0,t.jsxs)(d.Select,{value:E,onValueChange:M,children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{placeholder:"Sıralama kriteri"})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"name",children:"Ad Soyad"}),(0,t.jsx)(d.SelectItem,{value:"username",children:"Kullanıcı Adı"}),(0,t.jsx)(d.SelectItem,{value:"email",children:"E-posta"}),(0,t.jsx)(d.SelectItem,{value:"role",children:"Rol"}),(0,t.jsx)(d.SelectItem,{value:"productCount",children:"Atanan Ürün Sayısı"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Sıra"}),(0,t.jsxs)(d.Select,{value:P,onValueChange:e=>I(e),children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{placeholder:"Sıra"})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"asc",children:"Artan"}),(0,t.jsx)(d.SelectItem,{value:"desc",children:"Azalan"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium opacity-0",children:"."}),(0,t.jsx)(n.Button,{variant:"outline",className:"w-full",onClick:()=>{S(""),z("all"),M("name"),I("asc")},children:"Filtreleri Temizle"})]})]})]})]}),b?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("div",{className:"text-muted-foreground",children:"Kullanıcılar yükleniyor..."})}):0===B.length?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("div",{className:"text-muted-foreground",children:C||"all"!==A?"Filtrelere uygun kullanıcı bulunamadı.":"Henüz kullanıcı eklenmemiş."})}):(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:B.map(e=>(0,t.jsxs)(l.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsxs)(l.CardTitle,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.UserCheck,{className:"h-5 w-5 text-blue-600"}),(0,t.jsx)("span",{className:"text-lg font-semibold text-foreground",children:e.name&&e.surname?"".concat(e.name," ").concat(e.surname):e.username||"Kullanıcı ".concat(e.id)})]}),(0,t.jsxs)(n.Button,{size:"sm",variant:"outline",className:"text-xs px-2 py-1",children:[(0,t.jsx)(h.Edit,{className:"h-3 w-3 mr-1"}),"Düzenle"]})]})}),(0,t.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[e.username&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Kullanıcı Adı"}),(0,t.jsx)("div",{className:"font-medium",children:e.username})]})]}),e.email&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Mail,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"E-posta"}),(0,t.jsx)("div",{className:"font-medium",children:e.email})]})]})]}),e.role&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Rol"}),(0,t.jsx)(c.Badge,{variant:"secondary",children:e.role})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-xs text-muted-foreground mb-1",children:["Atanan Ürünler (",e.productCount,")"]}),e.assignedProducts.length>0?(0,t.jsxs)("div",{className:"space-y-1",children:[e.assignedProducts.slice(0,3).map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(x.Package,{className:"h-3 w-3 text-muted-foreground"}),(0,t.jsx)("span",{className:"font-medium",children:e.productSerial})]},e.id)),e.assignedProducts.length>3&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["+",e.assignedProducts.length-3," ürün daha"]})]}):(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Atanan ürün yok"})]}),(0,t.jsx)("div",{className:"pt-2 border-t",children:(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Kullanıcı ID: ",e.id]})})]})]},e.id))})]}):(0,t.jsx)("div",{className:"max-w-4xl mx-auto py-8 space-y-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(g,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Erişim Reddedildi"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Bu sayfaya erişim yetkiniz bulunmamaktadır."})]})}):(0,t.jsx)("div",{className:"max-w-4xl mx-auto py-8 space-y-6",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("div",{className:"text-muted-foreground",children:"Yetki kontrolü yapılıyor..."})})})}}]);